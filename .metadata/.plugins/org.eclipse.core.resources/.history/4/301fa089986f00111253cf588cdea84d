package YambaClient.Package;

import winterwell.jtwitter.Twitter;
import android.app.Service;
import android.content.Intent;
import android.os.IBinder;

public class TimelinePullService extends Service
{
	private YambaClientApplication app;
	static final int DELAY = 60000;
	private Thread worker;
	
	@Override
	public IBinder onBind(Intent intent) 
	{
		return null;
	}
	
	@Override
	public void onCreate() 
	{
		super.onCreate();
		app = (YambaClientApplication) getApplication();
		worker = new Thread(new Runnable() {
			
			public void run() 
			{
				try 
				{
					Twitter tw = app.GetTwitter();
					tw.getHomeTimeline();
					Log.D("Testes", "OK!");
					Thread.sleep(DELAY);
				} 
				catch (InterruptedException e) 
				{
					
				}		
			}
		});
	}
	
	@Override
	public int onStartCommand(Intent intent, int flags, int startId) 
	{
		super.onStartCommand(intent, flags, startId);
		worker.start();
		return START_STICKY;
	}
	
	@Override
	public void onDestroy() 
	{
		super.onDestroy();
		worker.interrupt();
	}
}